{"version":3,"sources":["app/components/ResultList.js","img/potato.svg","app/components/DetailsFrame.js","img/header.jpg","app/components/ApiModal.js","app/components/LoadFileModal.js","app/components/InfoModal.js","App.js","index.js"],"names":["ResultList","props","_onColumnClick","ev","column","columns","state","items","newColumns","slice","currColumn","filter","currCol","key","forEach","newCol","isSortedDescending","isSorted","setState","announcedMessage","name","newItems","columnKey","sort","a","b","_copyAndSort","fieldName","onSelectSingle","selectedKey","minWidth","maxWidth","onColumnClick","onRender","item","relevance","toFixed","data","isPadded","sortAscendingAriaLabel","sortDescendingAriaLabel","isMultiline","authors","year","_selection","Selection","onSelectionChanged","getSelectedCount","getSelection","selectedItem","isModalSelection","isCompactMode","selectToKey","this","isLoading","ShimmeredDetailsList","enableShimmer","length","compact","selectionMode","SelectionMode","single","getKey","_getKey","setKey","layoutMode","DetailsListLayoutMode","fixedColumns","isHeaderVisible","selection","selectionPreservedOnEmptyClick","enterModalSelectionOnTouch","ariaLabelForSelectionColumn","ariaLabelForSelectAllCheckbox","checkButtonAriaLabel","index","Component","classNames","mergeStyleSets","relative","position","abstract","DetailsFrame","ShimmerElementsGroup","flexWrap","style","width","shimmerElements","type","ShimmerElementType","line","selectedPaper","onPaperAction","Stack","height","tokens","childrenGap","horizontal","horizontalAlign","inList","LIST_RESULT","PrimaryButton","text","iconProps","iconName","onClick","LIST_RELEVANT","LIST_NOT_RELEVANT","DefaultButton","StackItem","grow","className","ScrollablePane","scrollbarVisibility","ScrollbarVisibility","auto","Shimmer","isDataLoaded","Text","fontWeight","FontWeights","semibold","variant","gap","publication","customElementsGroup","customElements","Link","target","href","abstractlink","doi","citedByCount","refs","Image","margin","src","logo","theme","getTheme","ApiModal","isOpen","onClose","apiKey","onApiKeyChange","onClearCache","Modal","isBlocking","containerClassName","contentStyles","container","header","IconButton","styles","iconButtonStyles","ariaLabel","body","verticalAlign","TextField","label","value","onChange","display","flexFlow","alignItems","fonts","xLarge","flex","borderTop","palette","themePrimary","color","neutralPrimary","padding","overflowY","root","marginLeft","marginTop","marginRight","rootHovered","neutralDark","LoadFileModal","onLoadFile","vertical","id","InfoModal","title","paperFrame","background","white","searchBar","PaperCache","prefix","encodeURIComponent","controller","signal","get","fetch","response","TypeError","abort","ok","status","json","set","console","log","message","Error","del","App","elem","clear","loadSemScholar","cache","getOrLoad","onLoadData","searchString","query","count","limit","start","totalResults","error","statusCode","statusText","errorState","apiError","results","Number","paperList","entry","push","result","processSearchResults","handleTabLinkClick","selectedTabId","itemKey","newPaper","action","newList","paper","map","p","oldPaper","find","inBatch","paperId","cites","raw","ids","author","join","venue","loadSemScholarForMany","getPaperScores","onToCitavi","relevantList","doiList","blob","Blob","anchor","document","createElement","download","window","webkitURL","URL","createObjectURL","dataset","downloadurl","click","onSave","stateJSON","JSON","stringify","onLoadFileOpenClose","isLoadFileModalOpen","onInfoModalClose","isInfoModalOpen","onSettingsOpenClose","isApiKeyModalOpen","newVal","file","files","reader","FileReader","onload","e","savedText","savedState","parse","readAsText","closeMessageBar","toggleSearchHelper","isSearchHelper","clearSearch","searchResultsList","notRelevantList","listRef","React","createRef","fileLocation","lastSearch","listType","prevProps","prevState","_filterPapers","listItems","_items","disabled","_farItems","iconOnly","alt","SearchBox","placeholder","onSearch","TeachingBubble","hasCloseButton","closeButtonAriaLabel","primaryButtonProps","children","onDismiss","headline","CommandBar","overflowItems","overflowButtonProps","farItems","Sticky","stickyPosition","StickyPositionType","Header","Pivot","onLinkClick","headersOnly","linkFormat","PivotLinkFormat","tabs","PivotItem","itemIcon","headerText","itemCount","ProgressIndicator","description","MessageBar","messageBarType","MessageBarType","dismissButtonAriaLabel","ref","AbortController","Promise","all","semScholar","references","citations","updatedPaper","searchResults","searchQuery","entries","oldItems","some","link","substr","scopusEntry","papers","matrix","Array","paperIds","i","row","fill","idx","indexOf","isRelevant","refs_relevant","refs_pool","cited_relevant","cited_pool","cocit_pool","cocit_relevant","bibcup_pool","bibcup_relevant","m","j","k","relevantKpis","_","poolKpis","poolPoolRefs","Math","max","l","poolPoolCited","poolPoolCocit","poolPoolBibcup","relRelRefs","relRelCited","relRelCocit","relRelBibcup","poolRelRefs","poolRelCited","poolRelCocit","poolRelBibcup","Sentry","dsn","autoSessionTracking","integrations","Integrations","BrowserTracing","tracesSampleRate","mergeStyles","selectors","overflow","initializeIcons","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1cf881dc.chunk.js","sourcesContent":["import {\r\n  ShimmeredDetailsList,\r\n  Selection,\r\n  SelectionMode,\r\n  DetailsListLayoutMode,\r\n} from \"@fluentui/react\";\r\n\r\nimport React, { Component } from \"react\";\r\n\r\nexport default class ResultList extends Component {\r\n  _selection;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { onSelectSingle, selectedKey } = this.props;\r\n\r\n    const columns = [\r\n      {\r\n        key: \"column1\",\r\n        name: \"Relevance\",\r\n        fieldName: \"relevance\",\r\n        minWidth: 30,\r\n        maxWidth: 50,\r\n        isSorted: true,\r\n        isSortedDescending: true,\r\n        onColumnClick: this._onColumnClick,\r\n        onRender: (item) => {\r\n          return <span>{(item.relevance * 100).toFixed(2) + \"%\"}</span>;\r\n        },\r\n        data: \"string\",\r\n        isPadded: true,\r\n      },\r\n      {\r\n        key: \"column2\",\r\n        name: \"Name\",\r\n        fieldName: \"name\",\r\n        maxWidth: 350,\r\n        sortAscendingAriaLabel: \"Sorted A to Z\",\r\n        sortDescendingAriaLabel: \"Sorted Z to A\",\r\n        onColumnClick: this._onColumnClick,\r\n        data: \"string\",\r\n        isPadded: true,\r\n        isMultiline: true,\r\n      },\r\n      {\r\n        key: \"column3\",\r\n        name: \"Author/Year\",\r\n        fieldName: \"authors\",\r\n        minWidth: 75,\r\n        maxWidth: 150,\r\n        onColumnClick: this._onColumnClick,\r\n        data: \"string\",\r\n        onRender: (item) => {\r\n          return (\r\n            <span>\r\n              {item.authors} ({item.year})\r\n            </span>\r\n          );\r\n        },\r\n        isPadded: true,\r\n        isMultiline: true,\r\n      },\r\n    ];\r\n\r\n    this._selection = new Selection({\r\n      onSelectionChanged: () => {\r\n        const selectionCount = this._selection.getSelectedCount();\r\n        if (selectionCount === 1) {\r\n          onSelectSingle(this._selection.getSelection()[0]);\r\n        }\r\n      },\r\n    });\r\n\r\n    this.state = {\r\n      announcedMessage: null,\r\n      columns: columns,\r\n      selectedItem: null,\r\n      isModalSelection: false,\r\n      isCompactMode: false,\r\n    };\r\n\r\n    this._selection.selectToKey(selectedKey, true);\r\n  }\r\n\r\n  render() {\r\n    const { columns } = this.state;\r\n\r\n    const { items, isLoading } = this.props;\r\n\r\n    return (\r\n      <ShimmeredDetailsList\r\n        items={items}\r\n        enableShimmer={isLoading || items.length === 0}\r\n        compact={false}\r\n        onColumnClick={this._onColumnClick}\r\n        columns={columns}\r\n        selectionMode={SelectionMode.single}\r\n        getKey={this._getKey}\r\n        setKey=\"multiple\"\r\n        layoutMode={DetailsListLayoutMode.fixedColumns}\r\n        isHeaderVisible={true}\r\n        selection={this._selection}\r\n        selectionPreservedOnEmptyClick={true}\r\n        enterModalSelectionOnTouch={true}\r\n        ariaLabelForSelectionColumn=\"Toggle selection\"\r\n        ariaLabelForSelectAllCheckbox=\"Toggle selection for all items\"\r\n        checkButtonAriaLabel=\"Row checkbox\"\r\n      />\r\n    );\r\n  }\r\n\r\n  _getKey(item, index) {\r\n    return item ? item.key : index;\r\n  }\r\n\r\n  _onColumnClick = (ev, column) => {\r\n    const { columns } = this.state;\r\n    const { items } = this.props;\r\n    const newColumns = columns.slice();\r\n    const currColumn = newColumns.filter(\r\n      (currCol) => column.key === currCol.key\r\n    )[0];\r\n    newColumns.forEach((newCol) => {\r\n      if (newCol === currColumn) {\r\n        currColumn.isSortedDescending = !currColumn.isSortedDescending;\r\n        currColumn.isSorted = true;\r\n        this.setState({\r\n          announcedMessage: `${currColumn.name} is sorted ${\r\n            currColumn.isSortedDescending ? \"descending\" : \"ascending\"\r\n          }`,\r\n        });\r\n      } else {\r\n        newCol.isSorted = false;\r\n        newCol.isSortedDescending = true;\r\n      }\r\n    });\r\n    const newItems = _copyAndSort(\r\n      items,\r\n      currColumn.fieldName,\r\n      currColumn.isSortedDescending\r\n    );\r\n    this.setState({\r\n      columns: newColumns,\r\n      items: newItems,\r\n    });\r\n  };\r\n}\r\n\r\nfunction _copyAndSort(items, columnKey, isSortedDescending) {\r\n  const key = columnKey;\r\n  return items\r\n    .slice(0)\r\n    .sort((a, b) =>\r\n      (isSortedDescending ? a[key] < b[key] : a[key] > b[key]) ? 1 : -1\r\n    );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/potato.b60e5447.svg\";","import {\r\n  Stack,\r\n  DefaultButton,\r\n  PrimaryButton,\r\n  ScrollablePane,\r\n  ScrollbarVisibility,\r\n  mergeStyleSets,\r\n  Link,\r\n  Shimmer,\r\n  ShimmerElementsGroup,\r\n  ShimmerElementType,\r\n  Text,\r\n  StackItem,\r\n  FontWeights,\r\n  Image,\r\n} from \"@fluentui/react\";\r\nimport React, { Component } from \"react\";\r\nimport { LIST_NOT_RELEVANT, LIST_RELEVANT, LIST_RESULT } from \"../../App\";\r\nimport logo from \"../../img/potato.svg\";\r\n\r\nconst classNames = mergeStyleSets({\r\n  relative: {\r\n    position: \"relative\",\r\n  },\r\n  abstract: {\r\n    \"-moz-osx-font-smoothing\": \"grayscale\",\r\n    \"-webkit-font-smoothing\": \"antialiased !important\",\r\n    \"-moz-font-smoothing\": \"antialiased !important\",\r\n    \"text-rendering\": \"optimizelegibility !important\",\r\n    \"letter-spacing\": \".03em\",\r\n    \"line-height\": \"1.25em\",\r\n    \"font-weight\": \"400\",\r\n    \"font-size\": \"1rem\",\r\n    \"line-height\": \"1.8\",\r\n    \"text-align\": \"justify\",\r\n  },\r\n});\r\n\r\nexport default class DetailsFrame extends Component {\r\n  customElements() {\r\n    return (\r\n      <ShimmerElementsGroup\r\n        flexWrap\r\n        style\r\n        width=\"100%\"\r\n        shimmerElements={[\r\n          { type: ShimmerElementType.line },\r\n          { type: ShimmerElementType.line },\r\n          { type: ShimmerElementType.line },\r\n          { type: ShimmerElementType.line },\r\n          { type: ShimmerElementType.line },\r\n        ]}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const { selectedPaper, onPaperAction, isLoading } = this.props;\r\n    if (!selectedPaper) {\r\n      return (\r\n        <Stack className={classNames.abstract}>\r\n          <Text>Howdy, Partner!</Text>\r\n          <Text>\r\n            This website helps to discover exciting new papers in three easy\r\n            steps:\r\n            <ol>\r\n              <li>\r\n                To get started, use the search box above to start a search query\r\n                on Scopus.\r\n              </li>\r\n              <li>\r\n                Based on the results, we suggest relevant papers on the left,\r\n                which you can mark as relevant or irrelevant using the buttons\r\n                at the top. Your vote will automatically move the paper to the\r\n                lists on the right side of the page. Based on the papers you\r\n                rated as relevant, we will suggest new papers to rate. For this\r\n                purpose, we use bibliometric data (i.e., co-citation &\r\n                bibliometric coupling) to find papers that have a particularly\r\n                high overlap with your selection.\r\n              </li>\r\n              <li>\r\n                If you have identified enough papers or if our suggestions do\r\n                not contain any more relevant papers, use the download function\r\n                in the header to export your results as a list.\r\n              </li>\r\n            </ol>\r\n          </Text>\r\n          <Image style={{ margin: \"0 auto\" }} src={logo} height={120} />\r\n        </Stack>\r\n      );\r\n    }\r\n    return (\r\n      <Stack\r\n        style={{ position: \"relative\", height: \"100%\" }}\r\n        tokens={{ childrenGap: 5 }}\r\n      >\r\n        <Stack\r\n          horizontal\r\n          horizontalAlign={\"space-evenly\"}\r\n          tokens={{ childrenGap: 5 }}\r\n        >\r\n          {selectedPaper.inList !== LIST_RESULT && (\r\n            <PrimaryButton\r\n              text=\"Back to Pool\"\r\n              iconProps={{ iconName: \"RevToggleKey\" }}\r\n              onClick={() => {\r\n                onPaperAction(selectedPaper, \"move-to-result\");\r\n              }}\r\n            />\r\n          )}\r\n          {selectedPaper.inList !== LIST_RELEVANT && (\r\n            <PrimaryButton\r\n              text=\"Mark relevant\"\r\n              iconProps={{ iconName: \"Accept\" }}\r\n              onClick={() => {\r\n                onPaperAction(selectedPaper, \"move-to-relevant\");\r\n              }}\r\n            />\r\n          )}\r\n          {selectedPaper.inList !== LIST_NOT_RELEVANT && (\r\n            <DefaultButton\r\n              text=\"Mark not relevant\"\r\n              iconProps={{ iconName: \"StatusCircleErrorX\" }}\r\n              onClick={() => {\r\n                onPaperAction(selectedPaper, \"move-to-not-relevant\");\r\n              }}\r\n            />\r\n          )}\r\n        </Stack>\r\n\r\n        <StackItem grow className={classNames.relative}>\r\n          <ScrollablePane scrollbarVisibility={ScrollbarVisibility.auto}>\r\n            <Stack tokens={{ childrenGap: 5 }}>\r\n              <Shimmer\r\n                shimmerElements={[\r\n                  { type: ShimmerElementType.line, height: 22 },\r\n                ]}\r\n                width={\"80%\"}\r\n                isDataLoaded={!isLoading}\r\n              >\r\n                <Text\r\n                  style={{ fontWeight: FontWeights.semibold }}\r\n                  variant={\"mediumPlus\"}\r\n                >\r\n                  {selectedPaper.name}\r\n                </Text>\r\n              </Shimmer>\r\n\r\n              <Shimmer\r\n                shimmerElements={[\r\n                  { type: ShimmerElementType.line, width: \"15%\" },\r\n                  { type: ShimmerElementType.gap, width: 10 },\r\n                  { type: ShimmerElementType.line, width: \"80%\" },\r\n                ]}\r\n                width={\"60%\"}\r\n                isDataLoaded={!isLoading}\r\n              >\r\n                <Text>\r\n                  <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                    Authors:{\" \"}\r\n                  </Text>\r\n                  {selectedPaper.authors}\r\n                </Text>\r\n              </Shimmer>\r\n              <Shimmer\r\n                isDataLoaded={!isLoading}\r\n                shimmerElements={[\r\n                  { type: ShimmerElementType.line, width: \"5%\" },\r\n                  { type: ShimmerElementType.gap, width: 10 },\r\n                  { type: ShimmerElementType.line, width: \"90%\" },\r\n                ]}\r\n              >\r\n                <Text>\r\n                  <Text style={{ fontWeight: FontWeights.semibold }}>In: </Text>{\" \"}\r\n                  {selectedPaper.publication}\r\n                </Text>\r\n              </Shimmer>\r\n\r\n              <Shimmer\r\n                customElementsGroup={this.customElements()}\r\n                isDataLoaded={!isLoading}\r\n              >\r\n                <Text className={classNames.abstract}>\r\n                  {selectedPaper.abstract}\r\n                </Text>\r\n              </Shimmer>\r\n\r\n              <Shimmer\r\n                customElementsGroup={this.customElements()}\r\n                isDataLoaded={!isLoading}\r\n              >\r\n                <Stack\r\n                  horizontal\r\n                  horizontalAlign=\"space-between\"\r\n                  tokens={{ childrenGap: 5 }}\r\n                >\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      Year:{\" \"}\r\n                    </Text>{\" \"}\r\n                    {selectedPaper.year}\r\n                  </Text>\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      Type:{\" \"}\r\n                    </Text>{\" \"}\r\n                    {selectedPaper.type}\r\n                  </Text>\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      DOI:{\" \"}\r\n                    </Text>\r\n                    <Link target={\"_blank\"} href={selectedPaper.abstractlink}>\r\n                      {selectedPaper.doi}\r\n                    </Link>\r\n                  </Text>\r\n                </Stack>\r\n                <Stack\r\n                  horizontal\r\n                  horizontalAlign=\"space-between\"\r\n                  tokens={{ childrenGap: 10 }}\r\n                >\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      Score:{\" \"}\r\n                    </Text>\r\n                    {(selectedPaper.relevance * 100).toFixed(2) + \"%\"}\r\n                  </Text>\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      #CitedBy:{\" \"}\r\n                    </Text>{\" \"}\r\n                    {selectedPaper.citedByCount}\r\n                  </Text>\r\n                  <Text>\r\n                    <Text style={{ fontWeight: FontWeights.semibold }}>\r\n                      #References:{\" \"}\r\n                    </Text>{\" \"}\r\n                    {selectedPaper.refs.length}\r\n                  </Text>\r\n                </Stack>\r\n              </Shimmer>\r\n            </Stack>\r\n          </ScrollablePane>\r\n        </StackItem>\r\n      </Stack>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/header.56f2f34e.jpg\";","import {\r\n  Modal,\r\n  IconButton,\r\n  Stack,\r\n  Text,\r\n  TextField,\r\n  mergeStyleSets,\r\n  DefaultButton,\r\n  getTheme,\r\n  Link,\r\n  FontWeights,\r\n  PrimaryButton,\r\n} from \"@fluentui/react\";\r\n\r\nconst theme = getTheme();\r\n\r\nexport default function ApiModal(props) {\r\n  const { isOpen, onClose, apiKey, onApiKeyChange, onClearCache } = props;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      isBlocking={false}\r\n      containerClassName={contentStyles.container}\r\n    >\r\n      <div className={contentStyles.header}>\r\n        <Text>Welcome to Potatosearch</Text>\r\n        <IconButton\r\n          styles={iconButtonStyles}\r\n          iconProps={{ iconName: \"Cancel\" }}\r\n          ariaLabel=\"Close popup modal\"\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n      <div className={contentStyles.body}>\r\n        <Stack tokens={{ childrenGap: 5 }}>\r\n          <Text variant=\"mediumPlus\">\r\n            This website helps to discover exciting new papers in three easy\r\n            steps:\r\n          </Text>\r\n          <Text>\r\n            <ol>\r\n              <li>\r\n                To get started, use the search box above to start a search query\r\n                on Scopus.\r\n              </li>\r\n              <li>\r\n                Based on the results, we suggest relevant papers on the left,\r\n                which you can mark as relevant or irrelevant using the buttons\r\n                at the top. Your vote will automatically move the paper to the\r\n                lists on the right side of the page. Based on the papers you\r\n                rated as relevant, we will suggest new papers to rate. For this\r\n                purpose, we use bibliometric data (i.e., co-citation &\r\n                bibliometric coupling) to find papers that have a particularly\r\n                high overlap with your selection.\r\n              </li>\r\n              <li>\r\n                If you have identified enough papers or if our suggestions do\r\n                not contain any more relevant papers, use the download function\r\n                in the header to export your results as a list.\r\n              </li>\r\n            </ol>\r\n          </Text>\r\n          <Text variant=\"mediumPlus\">\r\n            Before you start: Please provide your Scopus API-Key:\r\n          </Text>\r\n          <Link\r\n            href=\"https://github.com/dtdi/citetool/wiki/API-Key\"\r\n            target=\"_blank\"\r\n          >\r\n            Read here, how to obtain and configure your api key.\r\n          </Link>\r\n          <Stack horizontal verticalAlign=\"end\" tokens={{ childrenGap: 10 }}>\r\n            <TextField\r\n              label=\"Provide in your API Code\"\r\n              style={{ width: 300 }}\r\n              value={apiKey}\r\n              onChange={onApiKeyChange}\r\n            />\r\n            <PrimaryButton onClick={onClose}>Save</PrimaryButton>\r\n            <DefaultButton onClick={onClearCache}>Clear Cache</DefaultButton>\r\n          </Stack>\r\n        </Stack>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\nconst contentStyles = mergeStyleSets({\r\n  container: {\r\n    display: \"flex\",\r\n    flexFlow: \"column nowrap\",\r\n    alignItems: \"stretch\",\r\n    width: \"1000px\",\r\n    maxWidth: \"100%\",\r\n  },\r\n  header: [\r\n    theme.fonts.xLarge,\r\n    {\r\n      flex: \"1 1 auto\",\r\n      borderTop: `4px solid ${theme.palette.themePrimary}`,\r\n      color: theme.palette.neutralPrimary,\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      fontWeight: FontWeights.semibold,\r\n      padding: \"12px 12px 14px 24px\",\r\n    },\r\n  ],\r\n  body: {\r\n    flex: \"4 4 auto\",\r\n    padding: \"0 24px 24px 24px\",\r\n    overflowY: \"hidden\",\r\n  },\r\n});\r\n\r\nconst iconButtonStyles = {\r\n  root: {\r\n    color: theme.palette.neutralPrimary,\r\n    marginLeft: \"auto\",\r\n    marginTop: \"4px\",\r\n    marginRight: \"2px\",\r\n  },\r\n  rootHovered: {\r\n    color: theme.palette.neutralDark,\r\n  },\r\n};\r\n","import {\r\n  Modal,\r\n  IconButton,\r\n  Stack,\r\n  Text,\r\n  mergeStyleSets,\r\n  getTheme,\r\n  FontWeights,\r\n} from \"@fluentui/react\";\r\n\r\nconst theme = getTheme();\r\n\r\nexport default function LoadFileModal(props) {\r\n  const { isOpen, onClose, onLoadFile } = props;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      isBlocking={false}\r\n      containerClassName={contentStyles.container}\r\n    >\r\n      <div className={contentStyles.header}>\r\n        <Text>Load your Data</Text>\r\n        <IconButton\r\n          styles={iconButtonStyles}\r\n          iconProps={{ iconName: \"Cancel\" }}\r\n          ariaLabel=\"Close popup modal\"\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n      <div className={contentStyles.body}>\r\n        <Stack tokens={{ childrenGap: 5 }}>\r\n          <Text variant=\"mediumPlus\">\r\n            Load data from a PotatoSeachData.json File. Make sure to save your\r\n            current data before loading a file as the loading process will reset\r\n            all tables\r\n          </Text>\r\n          \r\n          <Stack vertical verticalAlign=\"end\" tokens={{ childrenGap: 10 }}>\r\n            <input\r\n              type=\"file\"\r\n              id=\"file\"\r\n              name=\"file\"\r\n              style={{ width: 400 }}\r\n              onChange={onLoadFile}\r\n             />\r\n          </Stack>\r\n        </Stack>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\nconst contentStyles = mergeStyleSets({\r\n  container: {\r\n    display: \"flex\",\r\n    flexFlow: \"column nowrap\",\r\n    alignItems: \"stretch\",\r\n    width: \"1000px\",\r\n    maxWidth: \"100%\",\r\n  },\r\n  header: [\r\n    theme.fonts.xLarge,\r\n    {\r\n      flex: \"1 1 auto\",\r\n      borderTop: `4px solid ${theme.palette.themePrimary}`,\r\n      color: theme.palette.neutralPrimary,\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      fontWeight: FontWeights.semibold,\r\n      padding: \"12px 12px 14px 24px\",\r\n    },\r\n  ],\r\n  body: {\r\n    flex: \"4 4 auto\",\r\n    padding: \"0 24px 24px 24px\",\r\n    overflowY: \"hidden\",\r\n  },\r\n});\r\n\r\nconst iconButtonStyles = {\r\n  root: {\r\n    color: theme.palette.neutralPrimary,\r\n    marginLeft: \"auto\",\r\n    marginTop: \"4px\",\r\n    marginRight: \"2px\",\r\n  },\r\n  rootHovered: {\r\n    color: theme.palette.neutralDark,\r\n  },\r\n};\r\n","import {\r\n  Modal,\r\n  IconButton,\r\n  Stack,\r\n  Text,\r\n  TextField,\r\n  mergeStyleSets,\r\n  DefaultButton,\r\n  getTheme,\r\n  Link,\r\n  FontWeights,\r\n  PrimaryButton,\r\n} from \"@fluentui/react\";\r\n\r\nconst theme = getTheme();\r\n\r\nexport default function InfoModal(props) {\r\n  const { isOpen, onClose } = props;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      isBlocking={false}\r\n      containerClassName={contentStyles.container}\r\n    >\r\n      <div className={contentStyles.header}>\r\n        <Text>About Potatosearch</Text>\r\n        <IconButton\r\n          styles={iconButtonStyles}\r\n          iconProps={{ iconName: \"Cancel\" }}\r\n          ariaLabel=\"Close popup modal\"\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n      <div className={contentStyles.body}>\r\n        <Stack tokens={{ childrenGap: 5 }}>\r\n          <Text>\r\n            This website helps to discover exciting new papers. Source Code can\r\n            be found at{\" \"}\r\n            <Link href=\"https://github.com/dtdi/citetool\">\r\n              https://github.com/dtdi/citetool\r\n            </Link>\r\n            .\r\n          </Text>\r\n          <Text>\r\n            Potatosearch makes heavy use of the{\" \"}\r\n            <Link href=\"https://www.semanticscholar.org/?utm_source=api\">\r\n              SemanticScholar API\r\n            </Link>\r\n            .\r\n          </Text>\r\n          <Text>\r\n            Potato Icon made by{\" \"}\r\n            <Link\r\n              href=\"https://www.flaticon.com/authors/good-ware\"\r\n              title=\"Good Ware\"\r\n            >\r\n              Good Ware\r\n            </Link>{\" \"}\r\n            from{\" \"}\r\n            <Link href=\"https://www.flaticon.com/\" title=\"Flaticon\">\r\n              www.flaticon.com\r\n            </Link>\r\n          </Text>\r\n        </Stack>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\nconst contentStyles = mergeStyleSets({\r\n  container: {\r\n    display: \"flex\",\r\n    flexFlow: \"column nowrap\",\r\n    alignItems: \"stretch\",\r\n    width: \"1000px\",\r\n    maxWidth: \"100%\",\r\n  },\r\n  header: [\r\n    theme.fonts.xLarge,\r\n    {\r\n      flex: \"1 1 auto\",\r\n      borderTop: `4px solid ${theme.palette.themePrimary}`,\r\n      color: theme.palette.neutralPrimary,\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      fontWeight: FontWeights.semibold,\r\n      padding: \"12px 12px 14px 24px\",\r\n    },\r\n  ],\r\n  body: {\r\n    flex: \"4 4 auto\",\r\n    padding: \"0 24px 24px 24px\",\r\n    overflowY: \"hidden\",\r\n  },\r\n});\r\n\r\nconst iconButtonStyles = {\r\n  root: {\r\n    color: theme.palette.neutralPrimary,\r\n    marginLeft: \"auto\",\r\n    marginTop: \"4px\",\r\n    marginRight: \"2px\",\r\n  },\r\n  rootHovered: {\r\n    color: theme.palette.neutralDark,\r\n  },\r\n};\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Stack,\r\n  StackItem,\r\n  CommandBar,\r\n  Pivot,\r\n  PivotItem,\r\n  Image,\r\n  mergeStyleSets,\r\n  Text,\r\n  SearchBox,\r\n  IconButton,\r\n  TeachingBubble,\r\n  PivotLinkFormat,\r\n  ProgressIndicator,\r\n  ScrollablePane,\r\n  ScrollbarVisibility,\r\n  Sticky,\r\n  StickyPositionType,\r\n  Link,\r\n  MessageBar,\r\n  MessageBarType,\r\n  getTheme,\r\n} from \"@fluentui/react\";\r\n\r\nimport { get, set, del, clear } from \"idb-keyval\";\r\n\r\n// import result from \"./data/scopusresult.json\";\r\n\r\nimport ResultList from \"./app/components/ResultList\";\r\nimport DetailsFrame from \"./app/components/DetailsFrame\";\r\nimport header from \"./img/header.jpg\";\r\nimport logo from \"./img/potato.svg\";\r\nimport \"./style.css\";\r\n\r\nimport ApiModal from \"./app/components/ApiModal\";\r\nimport LoadFileModal from \"./app/components/LoadFileModal\";\r\nimport InfoModal from \"./app/components/InfoModal\";\r\n\r\nconst theme = getTheme();\r\nconst classNames = mergeStyleSets({\r\n  paperFrame: {\r\n    width: \"45vw\",\r\n    padding: 20,\r\n    background: theme.palette.white,\r\n    position: \"relative\",\r\n    height: \"100%\",\r\n    \"box-sizing\": \"border-box\",\r\n  },\r\n  searchBar: {\r\n    background: theme.palette.white,\r\n  },\r\n});\r\n\r\nexport const LIST_RESULT = \"result\";\r\nexport const LIST_RELEVANT = \"relevant\";\r\nexport const LIST_NOT_RELEVANT = \"not-relevant\";\r\n\r\nclass PaperCache {\r\n  prefix = \"paper_\";\r\n\r\n  _getKey(doi) {\r\n    return this.prefix + encodeURIComponent(doi);\r\n  }\r\n\r\n  async getOrLoad(doi, controller, signal) {\r\n    const key = this._getKey(doi);\r\n    const item = await get(key);\r\n    if (item) {\r\n      return item;\r\n    } else {\r\n      let response;\r\n      try {\r\n        response = await fetch(\r\n          `https://api.semanticscholar.org/v1/paper/${doi}?include_unknown_references=true`,\r\n          { signal }\r\n        );\r\n      } catch (e) {\r\n        if (e instanceof TypeError) {\r\n          controller.abort();\r\n          throw e;\r\n        } else {\r\n          throw e;\r\n        }\r\n      }\r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          const body = await response.json();\r\n          set(key, body);\r\n          console.log(404);\r\n          return body;\r\n        } else {\r\n          const message = `An error has occured: ${response.status}`;\r\n          throw new Error(message);\r\n        }\r\n      }\r\n      const body = await response.json();\r\n      try {\r\n        set(key, body);\r\n      } catch (e) {\r\n        const message = `Unknown error`;\r\n        throw new Error(message, e);\r\n      }\r\n      return body;\r\n    }\r\n  }\r\n\r\n  remove(doi) {\r\n    del(this._getKey(doi));\r\n  }\r\n}\r\n\r\nexport default class App extends Component {\r\n  listRef;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.listRef = React.createRef();\r\n\r\n    this.state = {\r\n      paperList: [],\r\n      selectedPaper: null,\r\n      isSearchHelper: false,\r\n      searchResultsList: [],\r\n      relevantList: [],\r\n      notRelevantList: [],\r\n      selectedTabId: \"searchResultsList\",\r\n      apiKey: \"\",\r\n      fileLocation: \"\",\r\n      isApiKeyModalOpen: false,\r\n      isLoadFileModalOpen: false,\r\n      isInfoModalOpen: false,\r\n      isLoading: false,\r\n      searchString: `TITLE-ABS-KEY(\"heart attack\")`,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const lastSearch = await get(\"lastSearch\");\r\n    const apiKey = await get(\"apiKey\");\r\n    if (apiKey) {\r\n      this.setState({\r\n        apiKey: apiKey,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        isApiKeyModalOpen: true,\r\n      });\r\n    }\r\n    if (lastSearch) {\r\n      this.setState({ isLoading: true, searchString: lastSearch.searchString });\r\n      await this.processSearchResults(lastSearch.result);\r\n      this.setState({ isLoading: false });\r\n    }\r\n  }\r\n\r\n  _filterPapers(listType) {\r\n    const { paperList } = this.state;\r\n    return paperList.filter((paper) => {\r\n      return paper.inList === listType;\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.paperList !== this.state.paperList) {\r\n      this.setState({\r\n        searchResultsList: this._filterPapers(LIST_RESULT),\r\n        relevantList: this._filterPapers(LIST_RELEVANT),\r\n        notRelevantList: this._filterPapers(LIST_NOT_RELEVANT),\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectSingle = async (elem) => {\r\n    this.setState({\r\n      selectedPaper: elem,\r\n    });\r\n  };\r\n\r\n  onClearCache = async (ev) => {\r\n    clear();\r\n  };\r\n\r\n  loadSemScholar = async (doi, controller, signal) => {\r\n    let cache = new PaperCache();\r\n    try {\r\n      const item = await cache.getOrLoad(doi, controller, signal);\r\n      return item;\r\n    } catch (e) {\r\n      console.log(\"resource exhausted\", e);\r\n    }\r\n  };\r\n\r\n  onLoadData = async (searchString) => {\r\n    this.setState({\r\n      isLoading: true,\r\n      selectedPaper: null,\r\n      searchString: searchString,\r\n    });\r\n    const { apiKey } = this.state;\r\n\r\n    const query = encodeURIComponent(searchString);\r\n    const count = 25;\r\n    const limit = 25;\r\n    let start = 0;\r\n    const sort = \"relevancy\";\r\n\r\n    let errorState;\r\n    let results;\r\n    let totalResults = 0;\r\n\r\n    do {\r\n      try {\r\n        const response = await fetch(\r\n          `https://api.elsevier.com/content/search/scopus?apiKey=${apiKey}&query=${query}&count=${count}&start=${start}&sort=${sort}`\r\n        );\r\n        if (!response.ok) {\r\n          let error = \"\";\r\n\r\n          if (response.status === 400) {\r\n            const body = await response.json();\r\n            error = `An error has occured (${response.status}) ${body[\"service-error\"].status.statusCode}: ${body[\"service-error\"].status.statusText}`;\r\n          } else {\r\n            error = `An error has occured (${response.status})`;\r\n          }\r\n\r\n          errorState = {\r\n            isLoading: false,\r\n            apiError: error,\r\n          };\r\n          break;\r\n        }\r\n\r\n        const body = await response.json();\r\n        if (!results) {\r\n          results = body;\r\n          totalResults = Number(\r\n            results[\"search-results\"][\"opensearch:totalResults\"]\r\n          );\r\n\r\n          if (totalResults === 0) {\r\n            errorState = {\r\n              isLoading: false,\r\n              paperList: [],\r\n              apiError: \"Search did not return any results\",\r\n            };\r\n            break;\r\n          }\r\n        } else {\r\n          results[\"search-results\"].entry.push(...body[\"search-results\"].entry);\r\n        }\r\n      } catch (e) {\r\n        errorState = {\r\n          isLoading: false,\r\n          apiError: e.message,\r\n        };\r\n        break;\r\n      }\r\n      start += count;\r\n    } while (start < limit && start <= totalResults);\r\n\r\n    if (errorState) {\r\n      this.setState(errorState);\r\n      return;\r\n    }\r\n    await set(\"lastSearch\", {\r\n      searchString: this.state.searchString,\r\n      result: results,\r\n    });\r\n    await this.processSearchResults(results);\r\n    this.setState({\r\n      isLoading: false,\r\n    });\r\n  };\r\n\r\n  handleTabLinkClick = (item) => {\r\n    this.setState({\r\n      selectedTabId: item.props.itemKey,\r\n    });\r\n  };\r\n\r\n  onPaperAction = async (newPaper, action) => {\r\n    const { paperList } = this.state;\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    let newList = paperList\r\n      .filter((paper) => {\r\n        return action !== \"remove-paper\" || newPaper.key !== paper.key;\r\n      })\r\n      .map((paper) => {\r\n        if (paper.key === newPaper.key) {\r\n          if (action === \"move-to-result\") {\r\n            newPaper.inList = LIST_RESULT;\r\n          } else if (action === \"move-to-relevant\") {\r\n            newPaper.inList = LIST_RELEVANT;\r\n          } else if (action === \"move-to-not-relevant\") {\r\n            newPaper.inList = LIST_NOT_RELEVANT;\r\n          } else if (action === \"update-paper\") {\r\n          }\r\n\r\n          const updatedPaper = {\r\n            ...paper,\r\n            ...newPaper,\r\n          };\r\n          return updatedPaper;\r\n        }\r\n        return paper;\r\n      });\r\n\r\n    if (action === \"move-to-relevant\") {\r\n      newPaper.refs.forEach((p) => {\r\n        const oldPaper = newList.find((oldPaper) => oldPaper.doi === p.doi);\r\n        if (oldPaper) {\r\n          oldPaper.inBatch.push(newPaper.doi);\r\n        } else {\r\n          newList.push({\r\n            key: p.doi || p.paperId,\r\n            name: p.title,\r\n            abstract: null,\r\n            refs: [],\r\n            cites: [],\r\n            raw: {},\r\n            ids: [],\r\n            authors: p.authors\r\n              ? p.authors.map((author) => author.name).join(\", \")\r\n              : \"\",\r\n            publication: p.venue,\r\n            year: p.year,\r\n            doi: p.doi,\r\n            type: null,\r\n            citedByCount: null,\r\n            inBatch: [newPaper.doi],\r\n            inList: LIST_RESULT,\r\n          });\r\n        }\r\n      });\r\n      newList = await this.loadSemScholarForMany(newList);\r\n    }\r\n\r\n    newList = this.getPaperScores(newList).sort(\r\n      (a, b) => b.relevance - a.relevance\r\n    );\r\n    this.setState({\r\n      paperList: newList,\r\n      isLoading: false,\r\n    });\r\n    this.onSelectSingle(newList.find((p) => p.inList === LIST_RESULT));\r\n  };\r\n\r\n  onToCitavi = () => {\r\n    const { relevantList } = this.state;\r\n    var doiList = \"\";\r\n    relevantList.forEach((paper) => {\r\n      doiList += paper.doi + \"\\n\";\r\n    });\r\n\r\n    const blob = new Blob([doiList], { type: \"text/plain\" });\r\n    const anchor = document.createElement(\"a\");\r\n\r\n    anchor.download = \"PotatoSearch2Citavi.txt\";\r\n    anchor.href = (window.webkitURL || window.URL).createObjectURL(blob);\r\n    anchor.dataset.downloadurl = [\r\n      \"text/plain\",\r\n      anchor.download,\r\n      anchor.href,\r\n    ].join(\":\");\r\n    anchor.click();\r\n  };\r\n\r\n  onSave = () => {\r\n    const { state } = this;\r\n    const stateJSON = JSON.stringify(state);\r\n\r\n    const blob = new Blob([stateJSON], { type: \"text/plain\" });\r\n    const anchor = document.createElement(\"a\");\r\n\r\n    anchor.download = \"PotatoSearchData.json\";\r\n    anchor.href = (window.webkitURL || window.URL).createObjectURL(blob);\r\n    anchor.dataset.downloadurl = [\r\n      \"text/plain\",\r\n      anchor.download,\r\n      anchor.href,\r\n    ].join(\":\");\r\n    anchor.click();\r\n  };\r\n\r\n  onLoadFileOpenClose = () => {\r\n    const { isLoadFileModalOpen } = this.state;\r\n    this.setState({\r\n      isLoadFileModalOpen: !isLoadFileModalOpen,\r\n    });\r\n  };\r\n\r\n  onInfoModalClose = () => {\r\n    const { isInfoModalOpen } = this.state;\r\n    this.setState({\r\n      isInfoModalOpen: !isInfoModalOpen,\r\n    });\r\n  };\r\n\r\n  onSettingsOpenClose = () => {\r\n    const { isApiKeyModalOpen, apiKey } = this.state;\r\n    if (apiKey) {\r\n      set(\"apiKey\", apiKey);\r\n      this.setState({\r\n        isApiKeyModalOpen: !isApiKeyModalOpen,\r\n      });\r\n    } else {\r\n      const error = \"api key not provided.\";\r\n      this.setState(error);\r\n    }\r\n  };\r\n\r\n  onApiKeyChange = (ev, newVal) => {\r\n    this.setState({ apiKey: newVal });\r\n  };\r\n\r\n  onLoadFile = (ev) => {\r\n    const file = ev.target.files;\r\n\r\n    var reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const savedText = reader.result;\r\n      const savedState = JSON.parse(savedText);\r\n      this.setState(savedState);\r\n    };\r\n    reader.readAsText(file[0]);\r\n  };\r\n\r\n  closeMessageBar = (ev) => {\r\n    this.setState({ apiError: null });\r\n  };\r\n\r\n  toggleSearchHelper = (ev) => {\r\n    this.setState({ isSearchHelper: !this.state.isSearchHelper });\r\n  };\r\n\r\n  clearSearch = async (ev) => {\r\n    await del(\"lastSearch\");\r\n    this.setState({\r\n      paperList: [],\r\n      selectedPaper: null,\r\n      isSearchHelper: false,\r\n      searchResultsList: [],\r\n      relevantList: [],\r\n      notRelevantList: [],\r\n      selectedTabId: \"searchResultsList\",\r\n      isLoading: false,\r\n      searchString: `TITLE-ABS-KEY(\"heart attack\")`,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      selectedPaper,\r\n      searchResultsList,\r\n      searchString,\r\n      isSearchHelper,\r\n      relevantList,\r\n      notRelevantList,\r\n      selectedTabId,\r\n      isApiKeyModalOpen,\r\n      isLoadFileModalOpen,\r\n      isInfoModalOpen,\r\n      apiKey,\r\n      fileLocation,\r\n      isLoading,\r\n      apiError,\r\n    } = this.state;\r\n\r\n    let listItems;\r\n\r\n    switch (selectedTabId) {\r\n      case \"searchResultsList\":\r\n        listItems = searchResultsList;\r\n        break;\r\n      case \"relevantList\":\r\n        listItems = relevantList;\r\n        break;\r\n      case \"notRelevantList\":\r\n        listItems = notRelevantList;\r\n        break;\r\n      default:\r\n        listItems = searchResultsList;\r\n        break;\r\n    }\r\n\r\n    const _items = [\r\n      {\r\n        key: \"load\",\r\n        text: \"Load File\",\r\n        disabled: false,\r\n        iconProps: { iconName: \"Import\" },\r\n        onClick: this.onLoadFileOpenClose,\r\n      },\r\n      {\r\n        key: \"save\",\r\n        text: \"Save\",\r\n        disabled: false,\r\n        iconProps: { iconName: \"Save\" },\r\n        onClick: this.onSave,\r\n      },\r\n      {\r\n        key: \"toCitavi\",\r\n        text: \"To Citavi\",\r\n        disabled: false,\r\n        iconProps: { iconName: \"Share\" },\r\n        onClick: this.onToCitavi,\r\n      },\r\n    ];\r\n\r\n    const _overflowItems = [];\r\n    const _farItems = [\r\n      {\r\n        key: \"settings\",\r\n        text: \"Help & Settings\",\r\n        // This needs an ariaLabel since it's icon-only\r\n        ariaLabel: \"Help & Settings\",\r\n        iconOnly: true,\r\n        iconProps: { iconName: \"Settings\" },\r\n        onClick: this.onSettingsOpenClose,\r\n      },\r\n      {\r\n        key: \"info\",\r\n        text: \"Info\",\r\n        // This needs an ariaLabel since it's icon-only\r\n        ariaLabel: \"Info\",\r\n        iconOnly: true,\r\n        iconProps: { iconName: \"Info\" },\r\n        onClick: this.onInfoModalClose,\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <>\r\n        <ApiModal\r\n          isOpen={isApiKeyModalOpen}\r\n          apiKey={apiKey}\r\n          onClearCache={this.onClearCache}\r\n          onApiKeyChange={this.onApiKeyChange}\r\n          onClose={this.onSettingsOpenClose}\r\n        />\r\n        <LoadFileModal\r\n          isOpen={isLoadFileModalOpen}\r\n          fileLocation={fileLocation}\r\n          onLoadFile={this.onLoadFile}\r\n          onClose={this.onLoadFileOpenClose}\r\n        />\r\n        <InfoModal isOpen={isInfoModalOpen} onClose={this.onInfoModalClose} />\r\n        <Stack\r\n          style={{ height: \"100vh\" }}\r\n          tokens={{ padding: 20, childrenGap: 20 }}\r\n        >\r\n          <Stack\r\n            horizontal\r\n            horizontalAlign={\"space-around\"}\r\n            verticalAlign={\"center\"}\r\n            tokens={{ childrenGap: 20 }}\r\n            className={classNames.searchBar}\r\n          >\r\n            <Image className=\"header\" src={header} alt=\"Header\" />\r\n            <StackItem>\r\n              <Stack\r\n                horizontal\r\n                tokens={{ childrenGap: 10 }}\r\n                horizontalAlign=\"center\"\r\n              >\r\n                <Image\r\n                  className=\"logo\"\r\n                  style={{ width: 28 }}\r\n                  src={logo}\r\n                  alt=\"PotatoSearch\"\r\n                />\r\n                <Text style={{ fontWeight: \"bolder\" }}>Potatosearch</Text>\r\n              </Stack>\r\n            </StackItem>\r\n\r\n            <StackItem>\r\n              <Stack horizontal>\r\n                <SearchBox\r\n                  styles={{ root: { width: 400 } }}\r\n                  placeholder=\"Search\"\r\n                  onSearch={this.onLoadData}\r\n                  value={searchString}\r\n                />\r\n                <IconButton\r\n                  iconProps={{ iconName: \"Delete\" }}\r\n                  title=\"Clear current Search\"\r\n                  id=\"clearSearch\"\r\n                  ariaLabel=\"Help\"\r\n                  onClick={this.clearSearch}\r\n                />\r\n                <IconButton\r\n                  iconProps={{ iconName: \"Help\" }}\r\n                  title=\"Help\"\r\n                  id=\"searchHelpButton\"\r\n                  ariaLabel=\"Help\"\r\n                  onClick={this.toggleSearchHelper}\r\n                />\r\n                {isSearchHelper && (\r\n                  <TeachingBubble\r\n                    target=\"#searchHelpButton\"\r\n                    hasCloseButton={true}\r\n                    closeButtonAriaLabel=\"Close\"\r\n                    primaryButtonProps={{\r\n                      children: \"Explore Search Tips\",\r\n                      target: \"_blank\",\r\n                      href:\r\n                        \"http://schema.elsevier.com/dtds/document/bkapi/search/SCOPUSSearchTips.htm\",\r\n                    }}\r\n                    onDismiss={this.toggleSearchHelper}\r\n                    headline=\"SCOPUS Search Tips\"\r\n                  >\r\n                    SCOPUS Search API supports a Boolean syntax, which is a type\r\n                    of search allowing users to combine keywords with operators\r\n                    such as AND, NOT and OR to further produce more relevant\r\n                    results. For example, a Boolean search could be \"heart\" AND\r\n                    \"brain\". This would limit the search results to only those\r\n                    documents containing the two keywords.\r\n                  </TeachingBubble>\r\n                )}\r\n              </Stack>\r\n            </StackItem>\r\n            <CommandBar\r\n              items={_items}\r\n              overflowItems={_overflowItems}\r\n              overflowButtonProps={{ ariaLabel: \"More Comands\" }}\r\n              farItems={_farItems}\r\n              ariaLabel=\"Use left and right arrow keys to navigate between commands\"\r\n            />\r\n          </Stack>\r\n          <StackItem grow>\r\n            <Stack style={{ height: \"100%\" }} tokens={{ childrenGap: 5 }}>\r\n              <Stack\r\n                horizontal\r\n                style={{ height: \"100%\" }}\r\n                horizontalAlign=\"space-evenly\"\r\n                tokens={{ childrenGap: 10 }}\r\n              >\r\n                <StackItem className={classNames.paperFrame}>\r\n                  <DetailsFrame\r\n                    isLoading={isLoading}\r\n                    selectedPaper={selectedPaper}\r\n                    onPaperAction={this.onPaperAction}\r\n                  />\r\n                </StackItem>\r\n                <StackItem grow={2} className={classNames.paperFrame}>\r\n                  <ScrollablePane\r\n                    scrollbarVisibility={ScrollbarVisibility.auto}\r\n                  >\r\n                    <Sticky stickyPosition={StickyPositionType.Header}>\r\n                      <Stack\r\n                        tokens={{ padding: \"15px 15px 0\", childrenGap: 5 }}\r\n                      >\r\n                        <Pivot\r\n                          selectedKey={selectedTabId}\r\n                          onLinkClick={this.handleTabLinkClick}\r\n                          headersOnly={true}\r\n                          linkFormat={PivotLinkFormat.tabs}\r\n                        >\r\n                          <PivotItem\r\n                            itemKey={\"searchResultsList\"}\r\n                            itemIcon=\"AllApps\"\r\n                            headerText=\"Paper Pool\"\r\n                            itemCount={searchResultsList.length}\r\n                          ></PivotItem>\r\n                          <PivotItem\r\n                            itemKey={\"relevantList\"}\r\n                            itemIcon=\"Accept\"\r\n                            headerText=\"Relevant Paper\"\r\n                            itemCount={relevantList.length}\r\n                          ></PivotItem>\r\n                          <PivotItem\r\n                            itemKey={\"notRelevantList\"}\r\n                            itemIcon=\"StatusCircleErrorX\"\r\n                            headerText=\"Not Relevant\"\r\n                            itemCount={notRelevantList.length}\r\n                          ></PivotItem>\r\n                        </Pivot>\r\n                        {isLoading && (\r\n                          <ProgressIndicator\r\n                            label=\"We're Loading\"\r\n                            description=\"Lots of data from semantic Scholar\"\r\n                          />\r\n                        )}\r\n                        {apiError && (\r\n                          <MessageBar\r\n                            messageBarType={MessageBarType.error}\r\n                            isMultiline={false}\r\n                            onDismiss={this.closeMessageBar}\r\n                            dismissButtonAriaLabel=\"Close\"\r\n                          >\r\n                            {apiError}\r\n                            <Link\r\n                              href=\"https://github.com/dtdi/citetool/wiki/API-Key\"\r\n                              target=\"_blank\"\r\n                            >\r\n                              Did you provide your API Key?\r\n                            </Link>\r\n                          </MessageBar>\r\n                        )}\r\n                      </Stack>\r\n                    </Sticky>\r\n                    <Stack style={{ padding: 15 }}>\r\n                      <ResultList\r\n                        items={listItems}\r\n                        selectedKey={selectedPaper && selectedPaper.key}\r\n                        isLoading={isLoading}\r\n                        ref={this.listRef}\r\n                        onSelectSingle={this.onSelectSingle}\r\n                      />\r\n                    </Stack>\r\n                  </ScrollablePane>\r\n                </StackItem>\r\n              </Stack>\r\n            </Stack>\r\n          </StackItem>\r\n        </Stack>\r\n      </>\r\n    );\r\n  }\r\n\r\n  async loadSemScholarForMany(items) {\r\n    const controller = new AbortController();\r\n    const signal = controller.signal;\r\n\r\n    items = await Promise.all(\r\n      items.map(async (paper) => {\r\n        const semScholar = await this.loadSemScholar(\r\n          paper.doi,\r\n          controller,\r\n          signal\r\n        );\r\n        if (!semScholar) {\r\n          return paper;\r\n        }\r\n        const newPaper = {\r\n          abstract: semScholar.abstract,\r\n          refs: semScholar.references || [],\r\n          cites: semScholar.citations || [],\r\n          authors: semScholar.authors\r\n            ? semScholar.authors.map((author) => author.name).join(\", \")\r\n            : paper.authors,\r\n          ids: semScholar.references\r\n            ? semScholar.references.map((ref) => {\r\n                return ref.doi || ref.paperId;\r\n              })\r\n            : [],\r\n        };\r\n\r\n        const updatedPaper = {\r\n          ...paper,\r\n          ...newPaper,\r\n        };\r\n        updatedPaper.raw.semScholar = semScholar;\r\n\r\n        return updatedPaper;\r\n      })\r\n    );\r\n    return items;\r\n  }\r\n\r\n  async processSearchResults(result) {\r\n    let items = [];\r\n\r\n    if (!result || !result[\"search-results\"]) {\r\n      return;\r\n    }\r\n\r\n    const searchResults = result[\"search-results\"];\r\n\r\n    const searchQuery = searchResults[\"opensearch:Query\"][\"@searchTerms\"];\r\n\r\n    const entries = searchResults.entry;\r\n\r\n    const { paperList: oldItems } = this.state;\r\n\r\n    entries.forEach((entry) => {\r\n      let newDOI = !oldItems.some((item) => item.doi === entry[\"prism:doi\"]);\r\n      if (newDOI) {\r\n        let abstractlink = \"test\";\r\n        let links = entry[\"link\"];\r\n        links.forEach((link) => {\r\n          let linktype = link[\"@ref\"];\r\n          if (linktype === \"scopus\") {\r\n            abstractlink = link[\"@href\"];\r\n          }\r\n        });\r\n\r\n        items.push({\r\n          key: entry[\"prism:doi\"] || entry[\"dc:identifier\"],\r\n          name: entry[\"dc:title\"],\r\n          abstractlink: abstractlink,\r\n          abstract: null,\r\n          refs: [],\r\n          cites: [],\r\n          ids: [],\r\n          authors: entry[\"dc:creator\"], // @todo: replace with full list of authors.\r\n          publication: `${entry[\"prism:publicationName\"]} ${entry[\"prism:volume\"]}`,\r\n          year: entry[\"prism:coverDate\"].substr(0, 4),\r\n          doi: entry[\"prism:doi\"],\r\n          type: entry[\"subtypeDescription\"],\r\n          citedByCount: entry[\"citedby-count\"],\r\n          inBatch: [this.state.searchString],\r\n          raw: {\r\n            scopusEntry: entry,\r\n            semScholar: null,\r\n          },\r\n          inList: LIST_RESULT,\r\n        });\r\n      }\r\n    });\r\n\r\n    items = await this.loadSemScholarForMany(items);\r\n\r\n    // add to existing papers if exisiting\r\n    items.push(...oldItems);\r\n\r\n    items = this.getPaperScores(items);\r\n    items = items.sort((a, b) => b.relevance - a.relevance);\r\n\r\n    this.setState({\r\n      searchString: searchQuery,\r\n      paperList: items,\r\n      isLoading: false,\r\n    });\r\n    this.onSelectSingle(items[0]);\r\n  }\r\n\r\n  getPaperScores(papers) {\r\n    //Build matrix (Step1) -> direct references.\r\n    /** @description matrix for direct references */\r\n    let matrix = new Array(papers.length);\r\n    const paperIds = papers.map((paper) => paper.doi);\r\n    papers.forEach((paper, i) => {\r\n      let row = new Array(papers.length).fill(0);\r\n      paper.ids.forEach((id) => {\r\n        let idx = paperIds.indexOf(id);\r\n        if (idx !== -1) row[idx] = 1;\r\n      });\r\n      matrix[i] = row;\r\n    });\r\n\r\n    /** @description Lookup-Array - determines whether a paper is in list relevant or not. */\r\n    let isRelevant = papers.map((paper) => paper.inList === LIST_RELEVANT);\r\n\r\n    /**\r\n     * summarize all citations within the set of papers\r\n     */\r\n\r\n    papers = papers.map((p) => {\r\n      return {\r\n        ...p,\r\n        ...{\r\n          refs_relevant: 0,\r\n          refs_pool: 0,\r\n          cited_relevant: 0,\r\n          cited_pool: 0,\r\n          cocit_pool: 0,\r\n          cocit_relevant: 0,\r\n          bibcup_pool: 0,\r\n          bibcup_relevant: 0,\r\n        },\r\n      };\r\n    });\r\n\r\n    const m = {};\r\n\r\n    // each paper\r\n    for (let i = 0; i < papers.length; i++) {\r\n      // each column\r\n      for (let j = 0; j < papers.length; j++) {\r\n        //Referencing Count - a)\r\n        if (matrix[i][j] === 1) {\r\n          if (isRelevant[j]) {\r\n            papers[i].refs_relevant++;\r\n          } else {\r\n            papers[i].refs_pool++;\r\n          }\r\n        }\r\n        //Referenced Count - b)\r\n        if (matrix[j][i] === 1) {\r\n          if (isRelevant[j]) {\r\n            papers[i].cited_relevant++;\r\n          } else {\r\n            papers[i].cited_pool++;\r\n          }\r\n        }\r\n        // each row\r\n        for (let k = 0; k < papers.length; k++) {\r\n          // cocitation: how often has a paper been co-cited? - c)\r\n          if (matrix[j][i] === 1 && matrix[j][k] === 1 && i !== k) {\r\n            if (isRelevant[k]) {\r\n              papers[i].cocit_relevant++;\r\n            } else {\r\n              papers[i].cocit_pool++;\r\n            }\r\n          }\r\n          // bibcoupling: - d)\r\n          if (matrix[i][j] === 1 && matrix[k][j] === 1 && i !== k) {\r\n            if (isRelevant[k]) {\r\n              papers[i].bibcup_relevant++;\r\n            } else {\r\n              papers[i].bibcup_pool++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const relevantKpis = papers.filter((_, i) => isRelevant[i]);\r\n    const poolKpis = papers.filter((_, i) => !isRelevant[i]);\r\n\r\n    m.poolPoolRefs = Math.max(1, ...poolKpis.map((l) => l.refs_pool));\r\n    m.poolPoolCited = Math.max(1, ...poolKpis.map((l) => l.cited_pool));\r\n    m.poolPoolCocit = Math.max(1, ...poolKpis.map((l) => l.cocit_pool));\r\n    m.poolPoolBibcup = Math.max(1, ...poolKpis.map((l) => l.bibcup_pool));\r\n\r\n    m.relRelRefs = Math.max(1, ...relevantKpis.map((l) => l.refs_relevant));\r\n    m.relRelCited = Math.max(1, ...relevantKpis.map((l) => l.cited_relevant));\r\n    m.relRelCocit = Math.max(1, ...relevantKpis.map((l) => l.cocit_relevant));\r\n    m.relRelBibcup = Math.max(1, ...relevantKpis.map((l) => l.bibcup_relevant));\r\n\r\n    m.poolRelRefs = Math.max(1, ...poolKpis.map((l) => l.refs_relevant));\r\n    m.poolRelCited = Math.max(1, ...poolKpis.map((l) => l.cited_relevant));\r\n    m.poolRelCocit = Math.max(1, ...poolKpis.map((l) => l.cocit_relevant));\r\n    m.poolRelBibcup = Math.max(1, ...poolKpis.map((l) => l.bibcup_relevant));\r\n\r\n    papers.forEach((paper, i) => {\r\n      if (isRelevant[i]) {\r\n        paper.refs_relevant /= m.relRelRefs;\r\n        paper.cited_relevant /= m.relRelCited;\r\n        paper.cocit_relevant /= m.relRelCocit;\r\n        paper.bibcup_relevant /= m.relRelBibcup;\r\n\r\n        delete paper.refs_pool;\r\n        delete paper.cited_pool;\r\n        delete paper.cocit_pool;\r\n        delete paper.bibcup_pool;\r\n\r\n        paper.relevance =\r\n          (paper.refs_relevant +\r\n            paper.cited_relevant +\r\n            paper.cocit_relevant +\r\n            paper.bibcup_relevant) /\r\n          4;\r\n      } else {\r\n        paper.refs_pool /= m.poolPoolRefs;\r\n        paper.cited_pool /= m.poolPoolCited;\r\n        paper.cocit_pool /= m.poolPoolCocit;\r\n        paper.bibcup_pool /= m.poolPoolBibcup;\r\n\r\n        paper.refs_relevant /= m.poolRelRefs;\r\n        paper.cited_relevant /= m.poolRelCited;\r\n        paper.cocit_relevant /= m.poolRelCocit;\r\n        paper.bibcup_relevant /= m.poolRelBibcup;\r\n\r\n        paper.relevance =\r\n          (paper.refs_relevant +\r\n            paper.cited_relevant +\r\n            paper.cocit_relevant +\r\n            paper.bibcup_relevant +\r\n            paper.refs_pool +\r\n            paper.cited_pool +\r\n            paper.cocit_pool +\r\n            paper.bibcup_pool) /\r\n          8;\r\n      }\r\n    });\r\n    return papers;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n// import reportWebVitals from \"./reportWebVitals\";\r\nimport { mergeStyles, initializeIcons } from \"@fluentui/react\";\r\n\r\nimport * as Sentry from \"@sentry/react\";\r\nimport { Integrations } from \"@sentry/tracing\";\r\n\r\nSentry.init({\r\n  dsn:\r\n    \"https://6b5e57b77ebf466980c9e68d76da6978@o503871.ingest.sentry.io/5589576\",\r\n\r\n  autoSessionTracking: true,\r\n  integrations: [new Integrations.BrowserTracing()],\r\n\r\n  // We recommend adjusting this value in production, or using tracesSampler\r\n  // for finer control\r\n  tracesSampleRate: 1.0,\r\n});\r\n\r\n// Inject some global styles\r\nmergeStyles({\r\n  selectors: {\r\n    \":global(body), :global(html), :global(#app)\": {\r\n      margin: 0,\r\n      padding: 0,\r\n      height: \"100vh\",\r\n      overflow: \"hidden\",\r\n    },\r\n  },\r\n});\r\n\r\ninitializeIcons();\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n//reportWebVitals(console.log);\r\n"],"sourceRoot":""}