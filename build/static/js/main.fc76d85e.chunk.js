(this.webpackJsonpciter=this.webpackJsonpciter||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),o=n(52),i=n.n(o),c=n(22),s=n(37),l=n(41),p=n(40),u=n(11),h=n.n(u),d=n(25),b=n(31),f=n(32),m=n(4),j=n(179),v=n(57),x=n(180),y=n(70),g=n(181),O=n(187),k=n(174),S=n(168),C=n(173),w=n(56),_=n(86),L=n(182),P=n(183),R=n(6),M=n(178),A=n(29),K=n(155),B=n(166),N=n(24),I=n(7),T=(Object(m.x)({scrollWrapper:{position:"relative",height:"65vh"},controlWrapper:{display:"flex",flexWrap:"wrap"}}),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(b.a)(this,n),(r=t.call(this,e))._onColumnClick=function(e,t){var n=r.state.columns,a=r.props.items,o=n.slice(),i=o.filter((function(e){return t.key===e.key}))[0];o.forEach((function(e){e===i?(i.isSortedDescending=!i.isSortedDescending,i.isSorted=!0,r.setState({announcedMessage:"".concat(i.name," is sorted ").concat(i.isSortedDescending?"descending":"ascending")})):(e.isSorted=!1,e.isSortedDescending=!0)}));var c=function(e,t,n){var a=t;return e.slice(0).sort((function(e,t){return(n?e[a]<t[a]:e[a]>t[a])?1:-1}))}(a,i.fieldName,i.isSortedDescending);r.setState({columns:o,items:c})};var o=r.props.onSelectSingle,i=[{key:"column1",name:"Relevance",fieldName:"relevance",minWidth:30,maxWidth:50,isSorted:!0,isSortedDescending:!0,onColumnClick:r._onColumnClick,onRender:function(e){return Object(a.jsx)("span",{children:(100*e.relevance).toFixed(2)+"%"})},data:"string",isPadded:!0},{key:"column2",name:"Name",fieldName:"name",maxWidth:350,sortAscendingAriaLabel:"Sorted A to Z",sortDescendingAriaLabel:"Sorted Z to A",onColumnClick:r._onColumnClick,data:"string",isPadded:!0,isMultiline:!0},{key:"column3",name:"Author/Year",fieldName:"authors",minWidth:75,maxWidth:150,onColumnClick:r._onColumnClick,data:"string",onRender:function(e){return Object(a.jsxs)("span",{children:[e.authors," (",e.year,")"]})},isPadded:!0,isMultiline:!0}];return r._selection=new K.a({onSelectionChanged:function(){1===r._selection.getSelectedCount()&&o(r._selection.getSelection()[0])}}),r.state={announcedMessage:null,columns:i,selectedItem:null,isModalSelection:!1,isCompactMode:!1},r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.state.columns,t=this.props,n=t.items,r=t.isLoading;return Object(a.jsx)(B.a,{items:n,enableShimmer:r||0===n.length,compact:!1,onColumnClick:this._onColumnClick,columns:e,selectionMode:N.b.single,getKey:this._getKey,setKey:"multiple",layoutMode:I.e.fixedColumns,isHeaderVisible:!0,selection:this._selection,selectionPreservedOnEmptyClick:!0,enterModalSelectionOnTouch:!0,ariaLabelForSelectionColumn:"Toggle selection",ariaLabelForSelectAllCheckbox:"Toggle selection for all items",checkButtonAriaLabel:"Row checkbox"})}},{key:"_getKey",value:function(e,t){return e?e.key:t}}]),n}(r.Component));var E=n(87),D=n(19),H=n(164),F=n(88),W=n(176),z=(Object(m.x)({detailsStack:{height:"80vh"},scrollWrapper:{position:"relative",height:"40vh"},scroller:{}}),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"customElements",value:function(){return Object(a.jsx)(E.a,{flexWrap:!0,style:!0,width:"100%",shimmerElements:[{type:D.a.line},{type:D.a.line},{type:D.a.line},{type:D.a.line},{type:D.a.line}]})}},{key:"render",value:function(){var e=this.props,t=e.selectedPaper,n=e.onPaperAction,r=e.isLoading;return t?Object(a.jsxs)(j.a,{tokens:{childrenGap:5},children:[Object(a.jsxs)(j.a,{horizontal:!0,horizontalAlign:"space-evenly",tokens:{childrenGap:5},children:[t.inList!==$&&Object(a.jsx)(H.a,{text:"Back to Pool",iconProps:{iconName:"RevToggleKey"},onClick:function(){n(t,"move-to-result")}}),t.inList!==ee&&Object(a.jsx)(H.a,{text:"Mark relevant",iconProps:{iconName:"Accept"},onClick:function(){n(t,"move-to-relevant")}}),t.inList!==te&&Object(a.jsx)(F.a,{text:"Mark not relevant",iconProps:{iconName:"StatusCircleErrorX"},onClick:function(){n(t,"move-to-not-relevant")}})]}),Object(a.jsx)(W.a,{shimmerElements:[{type:D.a.line,height:22}],width:"80%",isDataLoaded:!r,children:Object(a.jsx)(x.a,{variant:"mediumPlus",children:t.name})}),Object(a.jsx)(W.a,{shimmerElements:[{type:D.a.line,width:"15%"},{type:D.a.gap,width:10},{type:D.a.line,width:"80%"}],width:"60%",isDataLoaded:!r,children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"Authors:"})," ",Object(a.jsx)("i",{children:t.authors})]})}),Object(a.jsx)(W.a,{isDataLoaded:!r,shimmerElements:[{type:D.a.line,width:"5%"},{type:D.a.gap,width:10},{type:D.a.line,width:"90%"}],children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"In:"})," ",Object(a.jsx)("i",{children:t.publication})]})}),Object(a.jsx)(W.a,{customElementsGroup:this.customElements(),isDataLoaded:!r,children:Object(a.jsx)(x.a,{children:t.abstract})}),Object(a.jsxs)(j.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:5},children:[Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"Year:"})," ",t.year]}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"Type:"})," ",t.type]}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"DOI:"})," ",Object(a.jsx)(M.a,{target:"_blank",href:t.abstractlink,children:t.doi})]})]}),Object(a.jsxs)(j.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:10},children:[Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"Relevance Score:"})," ",(100*t.relevance).toFixed(2)+"%"]}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"#Cited-by:"})," ",t.citedByCount]}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)("b",{children:"#References:"})," ",t.refs.length]})]})]}):Object(a.jsx)(j.a,{children:Object(a.jsx)(x.a,{children:"Howdy, Partner! Try to start from a search result!"})})}}]),n}(r.Component)),G=n.p+"static/media/header.56f2f34e.jpg",U=(n(106),n(171)),Y=n(170),q=Object(m.u)();function J(e){var t=e.isOpen,n=e.onClose,r=e.apiKey,o=e.onApiKeyChange,i=e.onClearCache;return Object(a.jsxs)(U.a,{isOpen:t,isBlocking:!1,containerClassName:X.container,children:[Object(a.jsxs)("div",{className:X.header,children:[Object(a.jsx)(x.a,{children:"Welcome to Potatosearch"}),Object(a.jsx)(O.a,{styles:Z,iconProps:{iconName:"Cancel"},ariaLabel:"Close popup modal",onClick:n})]}),Object(a.jsx)("div",{className:X.body,children:Object(a.jsxs)(j.a,{tokens:{childrenGap:5},children:[Object(a.jsx)(x.a,{variant:"mediumPlus",children:"This website helps to discover exciting new papers in three easy steps:"}),Object(a.jsx)(x.a,{children:Object(a.jsxs)("ol",{children:[Object(a.jsx)("li",{children:"To get started, use the search box above to start a search query on Scopus."}),Object(a.jsx)("li",{children:"Based on the results, we suggest relevant papers on the left, which you can mark as relevant or irrelevant using the buttons at the top. Your vote will automatically move the paper to the lists on the right side of the page. Based on the papers you rated as relevant, we will suggest new papers to rate. For this purpose, we use bibliometric data (i.e., co-citation & bibliometric coupling) to find papers that have a particularly high overlap with your selection."}),Object(a.jsx)("li",{children:"If you have identified enough papers or if our suggestions do not contain any more relevant papers, use the download function in the header to export your results as a list."})]})}),Object(a.jsx)(x.a,{variant:"mediumPlus",children:"Before you start: Please provide your Scopus API-Key:"}),Object(a.jsx)(M.a,{href:"https://github.com/dtdi/citetool/wiki/API-Key",target:"_blank",children:"Read here, how to obtain and configure your api key."}),Object(a.jsxs)(j.a,{horizontal:!0,verticalAlign:"end",tokens:{childrenGap:10},children:[Object(a.jsx)(Y.a,{label:"Provide in your API Code",style:{width:300},value:r,onChange:o}),Object(a.jsx)(H.a,{onClick:n,children:"Save"}),Object(a.jsx)(F.a,{onClick:i,children:"Clear Cache"})]})]})})]})}var X=Object(m.x)({container:{display:"flex",flexFlow:"column nowrap",alignItems:"stretch",width:"1000px",maxWidth:"100%"},header:[q.fonts.xLarge,{flex:"1 1 auto",borderTop:"4px solid ".concat(q.palette.themePrimary),color:q.palette.neutralPrimary,display:"flex",alignItems:"center",fontWeight:m.d.semibold,padding:"12px 12px 14px 24px"}],body:{flex:"4 4 auto",padding:"0 24px 24px 24px",overflowY:"hidden"}}),Z={root:{color:q.palette.neutralPrimary,marginLeft:"auto",marginTop:"4px",marginRight:"2px"},rootHovered:{color:q.palette.neutralDark}},Q=Object(m.u)(),V=Object(m.x)({paperFrame:{width:"40vw",padding:20,background:Q.palette.white},searchBar:{background:Q.palette.white}}),$="result",ee="relevant",te="not-relevant",ne=function(){function e(){Object(b.a)(this,e),this.prefix="paper_"}return Object(f.a)(e,[{key:"_getKey",value:function(e){return this.prefix+encodeURIComponent(e)}},{key:"getOrLoad",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a,r,o,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._getKey(t),e.next=3,Object(A.c)(n);case 3:if(a=e.sent){e.next=26;break}return e.next=7,fetch("https://api.semanticscholar.org/v1/paper/".concat(t,"?include_unknown_references=true"));case 7:if((r=e.sent).ok){e.next=19;break}if(404!==r.status){e.next=17;break}return e.next=12,r.json();case 12:return o=e.sent,Object(A.d)(n,o),e.abrupt("return",o);case 17:throw i="An error has occured: ".concat(r.status),new Error(i);case 19:return e.next=21,r.json();case 21:c=e.sent;try{Object(A.d)(n,c)}catch(s){console.log(s)}return e.abrupt("return",c);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(e){Object(A.b)(this._getKey(e))}}]),e}(),ae=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).onSelectSingle=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({selectedPaper:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClearCache=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(A.a)();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadSemScholar=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ne,e.next=3,n.getOrLoad(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onLoadData=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,r,o,i,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0,selectedPaper:null,searchString:t}),n=a.state.apiKey,r=encodeURIComponent(t),25,0,"relevancy",e.prev=6,e.next=9,fetch("https://api.elsevier.com/content/search/scopus?apiKey=".concat(n,"&query=").concat(r,"&count=").concat(25,"&start=").concat(0,"&sort=").concat("relevancy"));case 9:if((o=e.sent).ok){e.next=22;break}if(i="",400!==o.status){e.next=19;break}return e.next=15,o.json();case 15:c=e.sent,i="An error has occured (".concat(o.status,") ").concat(c["service-error"].status.statusCode,": ").concat(c["service-error"].status.statusText),e.next=20;break;case 19:i="An error has occured (".concat(o.status,")");case 20:return a.setState({isLoading:!1,apiError:i}),e.abrupt("return");case 22:return e.next=24,o.json();case 24:return s=e.sent,Object(A.d)("lastSearch",{searchString:a.state.searchString,result:s}),e.next=28,a.processSearchResults(s);case 28:a.setState({isLoading:!1}),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(6),a.setState({isLoading:!1,apiError:e.t0.message});case 34:case"end":return e.stop()}}),e,null,[[6,31]])})));return function(t){return e.apply(this,arguments)}}(),a.handleTabLinkClick=function(e){a.setState({selectedTabId:e.props.itemKey})},a.onPaperAction=function(){var e=Object(d.a)(h.a.mark((function e(t,n){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.state.paperList,a.setState({isLoading:!0}),o=r.filter((function(e){return"remove-paper"!==n||t.key!==e.key})).map((function(e){return e.key===t.key?("move-to-result"===n?t.inList=$:"move-to-relevant"===n?t.inList=ee:"move-to-not-relevant"===n&&(t.inList=te),Object(s.a)(Object(s.a)({},e),t)):e})),"move-to-relevant"!==n){e.next=8;break}return t.refs.forEach((function(e){var n=o.find((function(t){return t.doi===e.doi}));n?n.inBatch.push(t.doi):o.push({key:e.doi||e.paperId,name:e.title,abstract:null,refs:[],cites:[],raw:{},ids:[],authors:e.authors?e.authors.map((function(e){return e.name})).join(", "):"",publication:e.venue,year:e.year,doi:e.doi,type:null,citedByCount:null,inBatch:[t.doi],inList:$})})),e.next=7,a.loadSemScholarForMany(o);case 7:o=e.sent;case 8:o=a.getPaperScores(o),a.setState({paperList:o.sort((function(e,t){return t.relevance-e.relevance})),isLoading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.onSettingsOpenClose=function(){var e=a.state,t=e.isApiKeyModalOpen,n=e.apiKey;if(n)Object(A.d)("apiKey",n),a.setState({isApiKeyModalOpen:!t});else{a.setState("api key not provided.")}},a.onApiKeyChange=function(e,t){a.setState({apiKey:t})},a.closeMessageBar=function(e){a.setState({apiError:null})},a.toggleSearchHelper=function(e){a.setState({isSearchHelper:!a.state.isSearchHelper})},a.state={paperList:[],selectedPaper:null,isSearchHelper:!1,searchResultsList:[],relevantList:[],notRelevantList:[],selectedTabId:"searchResultsList",apiKey:"",isApiKeyModalOpen:!0,isLoading:!1,searchString:'TITLE-ABS-KEY("heart attack")'},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.c)("lastSearch");case 2:return t=e.sent,e.next=5,Object(A.c)("apiKey");case 5:if((n=e.sent)&&this.setState({apiKey:n,isApiKeyModalOpen:!1}),!t){e.next=12;break}return this.setState({isLoading:!0,searchString:t.searchString}),e.next=11,this.processSearchResults(t.result);case 11:this.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_filterPapers",value:function(e){return this.state.paperList.filter((function(t){return t.inList===e}))}},{key:"componentDidUpdate",value:function(e,t){t.paperList!==this.state.paperList&&this.setState({searchResultsList:this._filterPapers($),relevantList:this._filterPapers(ee),notRelevantList:this._filterPapers(te)})}},{key:"render",value:function(){var e,t=this.state,n=t.selectedPaper,r=t.searchResultsList,o=t.searchString,i=t.isSearchHelper,c=t.relevantList,s=t.notRelevantList,l=t.selectedTabId,p=t.isApiKeyModalOpen,u=t.apiKey,h=t.isLoading,d=t.apiError;switch(l){case"searchResultsList":e=r;break;case"relevantList":e=c;break;case"notRelevantList":e=s;break;default:e=r}var b=[{key:"upload",text:"Upload",disabled:!0,iconProps:{iconName:"Upload"},href:"https://developer.microsoft.com/en-us/fluentui"},{key:"share",text:"Share",disabled:!0,iconProps:{iconName:"Share"},onClick:function(){return console.log("Share")}},{key:"download",text:"Download",disabled:!0,iconProps:{iconName:"Download"},onClick:function(){return console.log("Download")}}],f=[{key:"move",text:"Move to...",disabled:!0,onClick:function(){return console.log("Move to")},iconProps:{iconName:"MoveToFolder"}},{key:"copy",text:"Copy to...",disabled:!0,onClick:function(){return console.log("Copy to")},iconProps:{iconName:"Copy"}},{key:"rename",text:"Rename...",disabled:!0,onClick:function(){return console.log("Rename")},iconProps:{iconName:"Edit"}}],m=[{key:"settings",text:"Help & Settings",ariaLabel:"Help & Settings",iconOnly:!0,iconProps:{iconName:"Settings"},onClick:this.onSettingsOpenClose},{key:"info",text:"Info",ariaLabel:"Info",iconOnly:!0,iconProps:{iconName:"Info"},onClick:function(){return console.log("Info")}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J,{isOpen:p,apiKey:u,onClearCache:this.onClearCache,onApiKeyChange:this.onApiKeyChange,onClose:this.onSettingsOpenClose}),Object(a.jsxs)(j.a,{tokens:{padding:25,childrenGap:20},children:[Object(a.jsx)(v.a,{className:"header",src:G,alt:"Header"}),Object(a.jsxs)(j.a,{horizontal:!0,horizontalAlign:"space-around",verticalAlign:"center",tokens:{childrenGap:20},className:V.searchBar,children:[Object(a.jsx)(x.a,{style:{fontWeight:"bolder"},children:"Potatosearch"}),Object(a.jsx)(y.a,{children:Object(a.jsxs)(j.a,{horizontal:!0,children:[Object(a.jsx)(g.a,{styles:{root:{width:400}},placeholder:"Search",onSearch:this.onLoadData,value:o}),Object(a.jsx)(O.a,{iconProps:{iconName:"Help"},title:"Help",id:"searchHelpButton",ariaLabel:"Help",onClick:this.toggleSearchHelper}),i&&Object(a.jsx)(k.a,{target:"#searchHelpButton",hasCloseButton:!0,closeButtonAriaLabel:"Close",primaryButtonProps:{children:"Explore Search Tips",target:"_blank",href:"http://schema.elsevier.com/dtds/document/bkapi/search/SCOPUSSearchTips.htm"},onDismiss:this.toggleSearchHelper,headline:"SCOPUS Search Tips",children:'SCOPUS Search API supports a Boolean syntax, which is a type of search allowing users to combine keywords with operators such as AND, NOT and OR to further produce more relevant results. For example, a Boolean search could be "heart" AND "brain". This would limit the search results to only those documents containing the two keywords.'})]})}),Object(a.jsx)(S.a,{items:b,overflowItems:f,overflowButtonProps:{ariaLabel:"More Comands"},farItems:m,ariaLabel:"Use left and right arrow keys to navigate between commands"})]}),Object(a.jsx)(j.a,{className:"",tokens:{childrenGap:5},children:Object(a.jsxs)(j.a,{horizontal:!0,horizontalAlign:"space-evenly",tokens:{childrenGap:10},children:[Object(a.jsx)(y.a,{disableShrink:!0,className:V.paperFrame,children:Object(a.jsx)(z,{isLoading:h,selectedPaper:n,onPaperAction:this.onPaperAction})}),Object(a.jsx)(y.a,{grow:2,className:V.paperFrame,children:Object(a.jsxs)(j.a,{tokens:{childrenGap:5},children:[Object(a.jsxs)(C.a,{selectedKey:l,onLinkClick:this.handleTabLinkClick,headersOnly:!0,linkFormat:w.a.tabs,children:[Object(a.jsx)(_.a,{itemKey:"searchResultsList",itemIcon:"AllApps",headerText:"Paper Pool",itemCount:r.length}),Object(a.jsx)(_.a,{itemKey:"relevantList",itemIcon:"Accept",headerText:"Relevant Paper",itemCount:c.length}),Object(a.jsx)(_.a,{itemKey:"notRelevantList",itemIcon:"StatusCircleErrorX",headerText:"Not Relevant",itemCount:s.length})]}),h&&Object(a.jsx)(L.a,{label:"We're Loading",description:"Lots of data from semantic Scholar"}),d&&Object(a.jsxs)(P.a,{messageBarType:R.a.error,isMultiline:!1,onDismiss:this.closeMessageBar,dismissButtonAriaLabel:"Close",children:[d,Object(a.jsx)(M.a,{href:"https://github.com/dtdi/citetool/wiki/API-Key",target:"_blank",children:"Did you provide your API Key?"})]}),Object(a.jsx)(T,{items:e,isLoading:h,onSelectSingle:this.onSelectSingle})]})})]})})]})]})}},{key:"loadSemScholarForMany",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(d.a)(h.a.mark((function e(t){var a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadSemScholar(t.doi);case 2:return a=e.sent,r={abstract:a.abstract,refs:a.references||[],cites:a.citations||[],authors:a.authors?a.authors.map((function(e){return e.name})).join(", "):t.authors,ids:a.references?a.references.map((function(e){return e.doi||e.paperId})):[]},(o=Object(s.a)(Object(s.a)({},t),r)).raw.semScholar=a,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"processSearchResults",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var n,a,r,o=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&t["search-results"]){e.next=3;break}return e.abrupt("return");case 3:return a=t["search-results"],r=a["opensearch:Query"]["@searchTerms"],a.entry.forEach((function(e){var t="test";e.link.forEach((function(e){"scopus"===e["@ref"]&&(t=e["@href"])})),n.push({key:e["prism:doi"]||e["dc:identifier"],name:e["dc:title"],abstractlink:t,abstract:null,refs:[],cites:[],ids:[],authors:e["dc:creator"],publication:"".concat(e["prism:publicationName"]," ").concat(e["prism:volume"]),year:e["prism:coverDate"].substr(0,4),doi:e["prism:doi"],type:e.subtypeDescription,citedByCount:e["citedby-count"],inBatch:[o.state.searchString],raw:{scopusEntry:e,semScholar:null},inList:$})})),e.next=9,this.loadSemScholarForMany(n);case 9:n=e.sent,n=(n=this.getPaperScores(n)).sort((function(e,t){return t.relevance-e.relevance})),this.setState({searchString:r,paperList:n,isLoading:!1}),this.onSelectSingle(n[0]);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPaperScores",value:function(e){var t=new Array(e.length),n=e.map((function(e){return e.doi}));e.forEach((function(a,r){var o=new Array(e.length).fill(0);a.ids.forEach((function(e){var t=n.indexOf(e);-1!==t&&(o[t]=1)})),t[r]=o}));var a=e.map((function(e){return e.inList===ee}));e=e.map((function(e){return Object(s.a)(Object(s.a)({},e),{refs_relevant:0,refs_pool:0,cited_relevant:0,cited_pool:0,cocit_pool:0,cocit_relevant:0,bibcup_pool:0,bibcup_relevant:0})}));for(var r={},o=0;o<e.length;o++)for(var i=0;i<e.length;i++){1===t[o][i]&&(a[i]?e[o].refs_relevant++:e[o].refs_pool++),1===t[i][o]&&(a[i]?e[o].cited_relevant++:e[o].cited_pool++);for(var l=0;l<e.length;l++)1===t[i][o]&&1===t[i][l]&&o!==l&&(a[l]?e[o].cocit_relevant++:e[o].cocit_pool++),1===t[o][i]&&1===t[l][i]&&o!==l&&(a[l]?e[o].bibcup_relevant++:e[o].bibcup_pool++)}var p=e.filter((function(e,t){return a[t]})),u=e.filter((function(e,t){return!a[t]}));return r.poolPoolRefs=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.refs_pool}))))),r.poolPoolCited=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.cited_pool}))))),r.poolPoolCocit=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.cocit_pool}))))),r.poolPoolBibcup=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.bibcup_pool}))))),r.relRelRefs=Math.max.apply(Math,[1].concat(Object(c.a)(p.map((function(e){return e.refs_relevant}))))),r.relRelCited=Math.max.apply(Math,[1].concat(Object(c.a)(p.map((function(e){return e.cited_relevant}))))),r.relRelCocit=Math.max.apply(Math,[1].concat(Object(c.a)(p.map((function(e){return e.cocit_relevant}))))),r.relRelBibcup=Math.max.apply(Math,[1].concat(Object(c.a)(p.map((function(e){return e.bibcup_relevant}))))),r.poolRelRefs=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.refs_relevant}))))),r.poolRelCited=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.cited_relevant}))))),r.poolRelCocit=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.cocit_relevant}))))),r.poolRelBibcup=Math.max.apply(Math,[1].concat(Object(c.a)(u.map((function(e){return e.bibcup_relevant}))))),e.forEach((function(e,t){a[t]?(e.refs_relevant/=r.relRelRefs,e.cited_relevant/=r.relRelCited,e.cocit_relevant/=r.relRelCocit,e.bibcup_relevant/=r.relRelBibcup,delete e.refs_pool,delete e.cited_pool,delete e.cocit_pool,delete e.bibcup_pool,e.relevance=(e.refs_relevant+e.cited_relevant+e.cocit_relevant+e.bibcup_relevant)/4):(e.refs_pool/=r.poolPoolRefs,e.cited_pool/=r.poolPoolCited,e.cocit_pool/=r.poolPoolCocit,e.bibcup_pool/=r.poolPoolBibcup,e.refs_relevant/=r.poolRelRefs,e.cited_relevant/=r.poolRelCited,e.cocit_relevant/=r.poolRelCocit,e.bibcup_relevant/=r.poolRelBibcup,e.relevance=(e.refs_relevant+e.cited_relevant+e.cocit_relevant+e.bibcup_relevant+e.refs_pool+e.cited_pool+e.cocit_pool+e.bibcup_pool)/8)})),e}}]),n}(r.Component),re=n(167);Object(m.y)({selectors:{":global(body), :global(html), :global(#app)":{margin:0,padding:0,height:"100vh"}}}),Object(re.a)(),i.a.render(Object(a.jsx)(ae,{}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.fc76d85e.chunk.js.map